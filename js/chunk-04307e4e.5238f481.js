(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04307e4e"],{"01ea":function(t,n,i){"use strict";i.d(n,"g",(function(){return a})),i.d(n,"f",(function(){return s})),i.d(n,"e",(function(){return r})),i.d(n,"i",(function(){return u})),i.d(n,"b",(function(){return l})),i.d(n,"a",(function(){return d})),i.d(n,"c",(function(){return f})),i.d(n,"d",(function(){return _})),i.d(n,"h",(function(){return v})),i.d(n,"j",(function(){return h}));var e=i("5530"),o=i("65c2"),c=Object(e["a"])(Object(e["a"])({},o),{},{__dataPath:"https://data.jx3box.com/",__imgPath:"https://img.jx3box.com/",__iconPath:"https://icon.jx3box.com/"}),a=c.__imgPath,s=c.__dataPath,r=(c.__iconPath,c.__cms),u=(c.__down,c.__node,c.__ossMirror,c.__ossRoot,c.__visibleMap),l=(c.default_avatar,c.__Root),d=c.__OriginRoot,f=(c.__Github,c.__Preview,c.__server,c.__sso,c.__spider,c.__spider2,c.__next,c.__pay,c.__team,c.__lua,c.__dbm,c.__helperUrl,c.__os,c.__jx3,c.__cdn),_=(c.__staticPath,c.__clients),v=c.__postType,h=(c.__wikiType,c.__appType,c.__gameType,c.__sourceType,c.__userGroup,c.__userLevel,c.__userLevelColor,c.__Links,c.feedback)},"2f79":function(t,n,i){},4766:function(t,n,i){},"47b9":function(t,n,i){"use strict";const e=Object.freeze({PRIVATE:0,PUBLIC:1,all(){return[this.PRIVATE,this.PUBLIC]}});n["a"]=e},"52da":function(t,n,i){"use strict";var e=i("2b0e"),o=new e["default"];n["a"]=o},5420:function(t,n,i){"use strict";i("2f79")},"6c2b":function(t,n,i){"use strict";i.d(n,"b",(function(){return o})),i.d(n,"c",(function(){return c})),i.d(n,"a",(function(){return a})),i.d(n,"e",(function(){return s})),i.d(n,"d",(function(){return r}));var e=i("41cb");function o(t){return Object(e["a"])()({method:"GET",url:"/api/cms/post/collection",params:t})}function c(t){return Object(e["a"])()({method:"DELETE",url:"/api/cms/post/collection/".concat(t)})}function a(t){return Object(e["a"])()({method:"GET",url:"/api/cms/post/collection/".concat(t)})}function s(t,n){return Object(e["a"])().put("/api/cms/manage/post/collection/".concat(t),n)}function r(t){return Object(e["a"])().post("/api/cms/manage/message",t)}},a27f:function(t,n,i){"use strict";i.d(n,"c",(function(){return o})),i.d(n,"a",(function(){return c})),i.d(n,"b",(function(){return a}));var e=i("41cb");function o(t){return Object(e["b"])().get("/api/summary/batch",{params:t})}function c(t){return Object(e["b"])().get("/api/next2/users/birthday/today",{params:t})}function a(t){return Object(e["b"])().get("/api/next2/rss/overview/author/".concat(t))}},b06a:function(t,n,i){"use strict";i("4766")},fb92:function(t,n,i){"use strict";i.d(n,"a",(function(){return s})),i.d(n,"b",(function(){return a})),i.d(n,"c",(function(){return u}));i("99af");var e=i("5a0c"),o=i.n(e),c=i("4208");function a(t){return o()().from(o()(t))}function s(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],e=t.getFullYear(),o=t.getMonth()+1,c=t.getDate(),a=i?"".concat(e).concat(n).concat(r(o)).concat(n).concat(r(c)):"".concat(e).concat(n).concat(o).concat(n).concat(c);return a}function r(t){return t<10?"0"+t:t}function u(t){var n=o()(t),i=o()(),e=i.diff(n,"day");return 0===e?i.diff(n,"minute")<=60?{text:"刚刚",icon:"el-icon-loading"}:i.diff(n,"minute")<=120?{text:"2小时内",icon:"el-icon-time"}:{text:n.format("HH:mm"),icon:"el-icon-time"}:1===e?{text:"昨天",icon:"el-icon-time"}:e>=2&&e<=365?{text:n.format("MM-DD"),icon:"el-icon-date"}:{text:n.format("YYYY-MM-DD"),icon:"el-icon-date"}}i("a471"),o.a.locale("zh-cn"),o.a.extend(c)},fea7:function(t,n,i){"use strict";i.r(n);i("a4d3"),i("e01a");var e=function(){var t,n,i,e,o=this,c=o._self._c;return c("div",{staticClass:"m-collection-mini-single"},[o.collection?[c("div",{staticClass:"m-collection-mini-single-content"},[c("div",{staticClass:"m-header"},[c("div",{staticClass:"u-title"},[o.collection.public?o._e():c("i",{staticClass:"u-private el-icon-lock",attrs:{title:"仅自己可见"}}),o._v(" "+o._s(o.collection.title)+" ")]),c("div",{staticClass:"u-author"},[c("avatar",{staticClass:"u-author-avatar",attrs:{url:null===(t=o.collection.collection_user_info)||void 0===t?void 0:t.user_avatar,uid:null===(n=o.collection.collection_user_info)||void 0===n?void 0:n.user_id}}),c("div",{staticClass:"u-author-name"},[o._v(" "+o._s((null===(i=o.collection.collection_user_info)||void 0===i?void 0:i.display_name)||"匿名")+" ")]),c("div",{staticClass:"u-created-at"},[o._v("发布于 "+o._s(o.dateFormat(o.collection.created)))])],1)]),o.collection.description?c("div",{staticClass:"m-description"},[c("el-divider",{attrs:{"content-position":"left"}},[c("i",{staticClass:"el-icon-collection"}),o._v(" 小册简介 ")]),c("div",{staticClass:"u-description"},[c("p",{domProps:{innerHTML:o._s(o.resolveImagePath(o.collection.description))}})])],1):o._e(),o.collection.posts&&o.collection.posts.length?[c("el-divider",{attrs:{"content-position":"left"}},[c("i",{staticClass:"el-icon-folder"}),o._v(" 小册文章 ")]),c("ul",{staticClass:"m-list"},o._l(o.collection.posts,(function(t,n){return c("li",{key:n,staticClass:"u-item"},[t.icon?c("img",{staticClass:"u-item-icon",attrs:{src:o.iconUrl(t.icon)}}):o._e(),c("a",{staticClass:"u-item-title",attrs:{target:"_blank",href:"custom"===t.type?t.url:o.getLink(t.post_type||t.type,t.id)}},[o._v(o._s(t.custom_title||t.title))])])})),0)]:o._e(),o.collection.collection_user_info?c("author-card",{attrs:{author:o.collection.collection_user_info,uid:null===(e=o.collection.collection_user_info)||void 0===e?void 0:e.user_id}}):o._e()],2)]:c("el-alert",{attrs:{title:"该剑三小册不存在或已被删除",type:"info",center:"","show-icon":"",closable:!1}})],2)},o=[],c=(i("99af"),i("14d9"),i("d3b7"),i("ac1f"),i("5319"),i("47b9")),a=i("6c2b"),s=i("fb92"),r=i("5a0c"),u=i.n(r),l=i("52da"),d=i("85e4"),f=i("c9d2"),_=i("9616"),v=i("01ea"),h=function(){var t,n,i,e,o=this,c=o._self._c;return c("div",{staticClass:"m-author-card"},[c("div",{staticClass:"u-title"},[o._v("关于作者")]),c("div",{staticClass:"u-img-bg"},[c("img",{attrs:{src:o.showAvatar(null===(t=o.author)||void 0===t?void 0:t.user_avatar,335)}})]),c("div",{staticClass:"m-author-box"},[c("div",{staticClass:"u-info-box"},[c("div",{staticClass:"u-author"},[c("div",{staticClass:"u-author_name"},[o._v(o._s(null===(n=o.author)||void 0===n?void 0:n.display_name))]),c("div",{staticClass:"u-author_fans"},[o._v(o._s(o.fans)+"个粉丝")])]),o.isLogin?[o.subscribed?c("div",{staticClass:"u-follow",on:{click:o.unfollow}},[o._v("取消关注")]):c("div",{staticClass:"u-follow",on:{click:o.follow}},[o._v("关注TA")])]:o._e()],2),null!==(i=o.userInfo)&&void 0!==i&&i.user_bio?c("div",{staticClass:"u-author_introduce"},[o._v(o._s(null===(e=o.userInfo)||void 0===e?void 0:e.user_bio))]):o._e()])])},m=[],b=(i("a9e3"),i("04cf")),p=i("a27f"),g=i("8b31"),C={name:"AuthorCard",props:{author:{type:Object,default:function(){}},uid:{type:Number,default:0}},data:function(){return{subscribed:!1,fans:0,userInfo:{},isLogin:f["a"].isLogin()}},watch:{uid:{handler:function(t){t&&this.getUserInfo()},immediate:!0,deep:!0}},methods:{showAvatar:d["u"],getFans:function(t){var n=this;Object(p["b"])(t).then((function(t){n.fans=t.data.data.total||0,n.subscribed=t.data.data.subscribed||!1}))},follow:function(){var t=this;f["a"].isLogin()?Object(b["e"])({id:this.uid}).then((function(){t.subscribed=!0})):this.$message({message:"请先登录",type:"warning"})},unfollow:function(){var t=this;f["a"].isLogin()?Object(b["i"])({id:this.uid}).then((function(n){t.subscribed=!1})):this.$message({message:"请先登录",type:"warning"})},getUserInfo:function(){var t=this;Object(g["c"])(this.uid).then((function(n){var i;t.userInfo=null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.data,t.getFans(t.uid)}))}}},j=C,w=(i("5420"),i("2877")),O=Object(w["a"])(j,h,m,!1,null,null,null),x=O.exports,y={name:"CollectionSingle",props:[],components:{AuthorCard:x},data:function(){return{collection:"",publish:c["a"],url:location.href,views:0,loading:!1}},computed:{edit_link:function(){return Object(d["d"])("collection",this.collection.id)},id:function(){var t;return null===(t=this.collection)||void 0===t?void 0:t.id},author_id:function(){var t;return(null===(t=this.collection)||void 0===t?void 0:t.user_id)||0},canEdit:function(){return!0},title:function(){return this.collection.title}},watch:{"$route.params.id":{immediate:!0,handler:function(t){t&&(this.loadData(t),this.execStat(t))}}},methods:{getThumbnail:d["l"],getLink:function(t,n){return Object(d["i"])(t,n)},getTypeLabel:d["n"],showAvatar:d["u"],resolveImagePath:d["t"],dateFormat:function(t){return Object(s["a"])(new Date(1e3*t))},delete_handle:function(t,n){var i=this;t.preventDefault(),this.$confirm("确认是否删除该剑三小册？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["c"])(n).then((function(t){i.$message.success("删除成功"),i.$router.push({name:"collection"})}))}))},loadData:function(t){var n=this;this.loading=!0,Object(a["a"])(t).then((function(i){var e;n.collection=(null===i||void 0===i||null===(e=i.data)||void 0===e?void 0:e.data)||{},n.$store.state.user_id=n.collection.user_id,f["a"].isLogin()&&Object(_["b"])({source_type:"collection",source_id:~~t,link:location.href,title:n.title})})).finally((function(){n.loading=!1}))},execStat:function(t){var n=this;Object(_["d"])("collection",t),Object(_["a"])("collection",t).then((function(t){n.views=t.data.views||0}))},formatDate:function(t){return u()(t).format("YYYY-MM-DD HH:mm:ss")},iconUrl:function(t){var n=t.replace("_","/");return"".concat(v["g"],"image/").concat(n,".png")}},filters:{authorLink:d["a"]},created:function(){},mounted:function(){l["a"].$on("updateCollection",(function(){location.reload()}))}},L=y,k=(i("b06a"),Object(w["a"])(L,e,o,!1,null,null,null));n["default"]=k.exports}}]);