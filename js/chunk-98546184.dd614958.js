(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-98546184"],{"17ee":function(t,e,a){"use strict";a("a1e6")},1856:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return s}));var i=a("41cb");function n(t){return Object(i["a"])().get("/api/cms/namespace",{params:t})}function s(t){return Object(i["a"])().get("/api/cms/namespace/".concat(t))}},"19aa1":function(t,e,a){"use strict";a.r(e);a("9911");var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"namespace-mobile"},[e("div",{staticClass:"m-content",on:{scroll:t.handleScroll}},t._l(t.displayList,(function(a){return e("div",{key:a.id,staticClass:"m-item",class:{long:a.isLong},on:{click:function(e){return t.goNamespace(a.link)}}},[e("div",{staticClass:"m-item-user"},[e("div",{staticClass:"m-item-user-name"},[t._v(" "+t._s(a.creator&&a.creator.display_name||"匿名")+" ")]),e("div",{staticClass:"m-item-user-time"},[t._v(t._s(t._f("dataFormat")(a.created)))])]),e("div",{staticClass:"m-item-info"},[e("div",{staticClass:"m-item-info-key"},[t._v(t._s(a.key||"未知"))]),e("div",{staticClass:"m-item-info-desc"},[t._v(t._s(a.desc||a.key||"未知"))])])])})),0)])},n=[],s=a("5530"),o=a("2909"),c=(a("99af"),a("d81d"),a("14d9"),a("a434"),a("e9f5"),a("7d54"),a("ab43"),a("b64b"),a("d3b7"),a("ac1f"),a("841c"),a("159b"),a("1856")),r=a("e4f1"),l={name:"Namespace",props:[],data:function(){return{list:[],displayList:[],per:24,total:1,page:1,search:"",query:"",loading:!1}},computed:{params:function(){return{page:this.page,per:this.per,sort:"updated"}}},filters:{dataFormat:function(t){return t&&Object(r["a"])(1e3*~~t)||"-"}},methods:{handleScroll:function(t){var e=t.target;this.loading||e.scrollHeight-e.scrollTop-60<e.clientHeight&&(this.page=this.page+1)},loadNamespaceList:function(){var t=this;this.loading=!0;var e=this.removeEmpty(Object.assign({},this.params,{key:this.search}));Object(c["b"])(e).then((function(e){var a,i,n,s;1==t.page?t.list=null===e||void 0===e||null===(a=e.data)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.list:t.list=[].concat(Object(o["a"])(t.list),Object(o["a"])(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.list));t.total=e.data.data.total})).finally((function(){t.loading=!1}))},onSearch:function(){1==this.page?this.loadNamespaceList():this.page=1},removeEmpty:function(t){return Object.keys(t).forEach((function(e){null!==t[e]&&void 0!==t[e]&&""!==t[e]||delete t[e]})),t},goNamespace:function(t){window.location.href=t},processArray:function(t){var e=t.map((function(t){var e=t.key&&t.key.length>6;return Object(s["a"])(Object(s["a"])({},t),{},{isLong:e})}));this.displayList=this.layoutItemsEnhanced(e)},layoutItemsEnhanced:function(t){for(var e=t,a=[],i=[],n=0;n<e.length;n++){var s=e[n];if(s.isLong){if(i.length>0){for(var c=!1,r=n+1;r<e.length&&!c;r++)e[r].isLong||e[r].used||(i.push(e[r]),e[r].used=!0,c=!0,e.splice(r,1),n--);a.push.apply(a,Object(o["a"])(i)),i=[]}a.push(s)}else i.push(s),2===i.length&&(a.push.apply(a,Object(o["a"])(i)),i=[])}return i.length>0&&a.push.apply(a,Object(o["a"])(i)),a},getComplexLayout:function(t){var e=[],a=0;while(a<t.length){var i=t[a];i.isLong?(a>0&&!t[a-1].isLong&&e.push({type:"long-separator"}),e.push(i)):e.push(i),a++}return e}},watch:{params:{deep:!0,immediate:!0,handler:function(t){this.query="",this.loadNamespaceList()}},list:{deep:!0,handler:function(t){this.processArray(t)}}},created:function(){this.query=this.$route.query.namespace}},u=l,d=(a("17ee"),a("2877")),p=Object(d["a"])(u,i,n,!1,null,null,null);e["default"]=p.exports},a1e6:function(t,e,a){}}]);